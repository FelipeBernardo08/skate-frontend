<mat-card class="mt-3 mat-elevation-z4">
    <div class="row">
        <div class="col-md-4 mt-3">
            <div class="text-center mt-3">
                <p>Foto do perfil</p>
            </div>
            <div class="d-flex justify-content-center">
                <div mat-card-avatar id="avatar" class="example-header-image"
                    [ngStyle]="{'background-image': 'url(' + imageUrl + ')'}">
                </div>
            </div>
            <div *ngIf="!conditionChangePassword && !conditionEditProfile" class="d-flex justify-content-center mt-3">
                <button (click)="triggerImage()" class="btn btn-primary btn-sm text-light">Alterar</button>
                <input accept="image/*" #fileInput (change)="selectImage($event)" hidden type="file">
            </div>
            <div class="d-flex justify-content-center mt-3 cursor-pointer">
                <span (click)="logout()">
                    <i class="material-icons">logout</i>
                    <p>sair</p>
                </span>
            </div>
        </div>
        <div class="col-md-8">
            <form *ngIf="!conditionChangePassword">
                <div class="row">
                    <div class="col-12">
                        <mat-form-field appearance="fill" class="w-100 mt-3">
                            <mat-label>Nome</mat-label>
                            <input matInput placeholder="Digite seu nome" [disabled]="conditionEditProfile"
                                [(ngModel)]="user.name" name="name" required>
                            <mat-error>O campo nome é obrigatório</mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-md-6">
                        <mat-form-field appearance="fill" class="w-100 mt-3">
                            <mat-label>CPF</mat-label>
                            <input matInput placeholder="Digite seu cpf" [disabled]="conditionEditProfile"
                                [(ngModel)]="user.cpf" name="cpf" required>
                            <mat-error>O campo cpf é obrigatório</mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-md-6">
                        <mat-form-field appearance="fill" class="w-100 mt-3">
                            <mat-label>WhatsApp</mat-label>
                            <input matInput placeholder="Digite seu fone whatsapp" [disabled]="conditionEditProfile"
                                [(ngModel)]="user.fone" name="fone" required>
                            <mat-error>O campo WhatsApp é obrigatório</mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-md-8">
                        <mat-form-field appearance="fill" class="w-100 mt-3">
                            <mat-label>Cidade</mat-label>
                            <input matInput placeholder="Digite o nome da cidade" [disabled]="conditionEditProfile"
                                [(ngModel)]="user.address_city" name="address_city" required>
                            <mat-error>O campo cidade é obrigatório</mat-error>
                        </mat-form-field>
                    </div>
                    <div class="col-md-4">
                        <mat-form-field appearance="fill" class="w-100 mt-3">
                            <mat-label>Bairro</mat-label>
                            <input matInput placeholder="Digite o nome do bairro"
                                [(ngModel)]="user.address_neighborhood" [disabled]="conditionEditProfile"
                                name="address_neighborhood" required>
                            <mat-error>O campo bairro é obrigatório</mat-error>
                        </mat-form-field>
                    </div>
                </div>

                <div *ngIf="!conditionEditProfile" class="mb-2 mt-3">
                    <div class="d-flex justify-content-center">
                        <button class="btn btn-sm btn-success w-50" (click)="sendUpdateUser()">Salvar</button>
                    </div>
                </div>
            </form>

            <form *ngIf="conditionChangePassword">
                <div class="row">
                    <div class="col-12">
                        <mat-form-field class="w-100">
                            <mat-label>Senha</mat-label>
                            <input matInput placeholder="Digite a senha" [type]="hide1 ? 'password' : 'text'"
                                [(ngModel)]="password.pass1" name="pass1" required>
                            <i mat-icon-button matSuffix (click)="showPassword(1)" [attr.aria-label]="'Hide password'"
                                [attr.aria-pressed]="hide1" class="material-icons icone-hide">{{hide1? 'visibility_off'
                                :
                                'visibility'}}</i>
                            <mat-error>O campo senha é obrigatório</mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <mat-form-field class="w-100">
                            <mat-label>Repita a senha</mat-label>
                            <input matInput placeholder="Repita a senha" [type]="hide2 ? 'password' : 'text'"
                                [(ngModel)]="password.pass2" name="pass2" required>
                            <i mat-icon-button matSuffix (click)="showPassword(2)" [attr.aria-label]="'Hide password'"
                                [attr.aria-pressed]="hide2" class="material-icons icone-hide">{{hide2? 'visibility_off'
                                :
                                'visibility'}}</i>
                            <mat-error>O campo senha é obrigatório</mat-error>
                        </mat-form-field>
                    </div>
                </div>
                <div class="d-flex justify-content-center mt-3">
                    <button class="btn btn-sm btn-success w-50" (click)="sendChangePassword()">Salvar</button>
                </div>
            </form>

            <div *ngIf="!conditionChangePassword" class="d-flex justify-content-center mt-3">
                <button (click)="editProfile()"
                    [class]="conditionEditProfile ? 'btn w-50 btn-sm btn-primary': 'btn w-50 btn-sm btn-danger'">
                    {{conditionEditProfile ? 'Editar':'Cancelar' }}
                </button>
            </div>

            <div *ngIf="conditionEditProfile" class="d-flex justify-content-center mt-3">
                <button (click)="changePassword()" class="btn w-50 btn-sm btn-warning">
                    {{conditionChangePassword ? 'Cancelar' : 'Trocar senha'}}
                </button>
            </div>
        </div>
    </div>
</mat-card>